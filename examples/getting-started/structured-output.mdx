---
title: ç»“æ„åŒ–è¾“å‡º
---
æœ¬ç¤ºä¾‹å±•ç¤ºå¦‚ä½•åˆ©ç”¨AIæ™ºèƒ½ä½“çš„ç»“æ„åŒ–è¾“å‡ºæ¥ç”Ÿæˆæ ¼å¼è§„èŒƒçš„ç”µå½±å‰§æœ¬æ¦‚å¿µã€‚æ¼”ç¤ºä¸¤ç§æ–¹æ³•ï¼š
1. JSONæ¨¡å¼ï¼šä¼ ç»Ÿçš„JSONå“åº”è§£æ
2.ç»“æ„åŒ–è¾“å‡ºï¼šå¢å¼ºçš„ç»“æ„åŒ–æ•°æ®å¤„ç†

å¯å°è¯•çš„ç¤ºä¾‹æç¤ºï¼š
- "ä¸œäº¬" - è·å–ä»¥æœªæ¥æ—¥æœ¬ä¸ºèƒŒæ™¯çš„é«˜ç§‘æŠ€æƒŠæ‚šç‰‡
- "å¤ç½—é©¬" - ä½“éªŒå®å¤§çš„å†å²å‰§
- "æ›¼å“ˆé¡¿" - æ¢ç´¢ç°ä»£æµªæ¼«å–œå‰§
- "äºšé©¬é€Šé›¨æ—" - åœ¨å¼‚åŸŸç§˜å¢ƒå†’é™©
- "ç«æ˜Ÿæ®–æ°‘åœ°" - å¤ªç©ºå®šå±…ç‚¹çš„ç§‘å¹»æ•…äº‹

## ä»£ç 

```python structured_output.py
from textwrap import dedent
from typing import List

from agno.agent import Agent, RunResponse  # noqa
from agno.models.openai import OpenAIChat
from pydantic import BaseModel, Field


class MovieScript(BaseModel):
    setting: str = Field(
        ...,
        description="A richly detailed, atmospheric description of the movie's primary location and time period. Include sensory details and mood.",
    )
    ending: str = Field(
        ...,
        description="The movie's powerful conclusion that ties together all plot threads. Should deliver emotional impact and satisfaction.",
    )
    genre: str = Field(
        ...,
        description="The film's primary and secondary genres (e.g., 'Sci-fi Thriller', 'Romantic Comedy'). Should align with setting and tone.",
    )
    name: str = Field(
        ...,
        description="An attention-grabbing, memorable title that captures the essence of the story and appeals to target audience.",
    )
    characters: List[str] = Field(
        ...,
        description="4-6 main characters with distinctive names and brief role descriptions (e.g., 'Sarah Chen - brilliant quantum physicist with a dark secret').",
    )
    storyline: str = Field(
        ...,
        description="A compelling three-sentence plot summary: Setup, Conflict, and Stakes. Hook readers with intrigue and emotion.",
    )


# ä½¿ç”¨JSONæ¨¡å¼çš„æ™ºèƒ½ä½“
json_mode_agent = Agent(
    model=OpenAIChat(id="gpt-4o"),
    description=dedent("""\
        You are an acclaimed Hollywood screenwriter known for creating unforgettable blockbusters! ğŸ¬
        With the combined storytelling prowess of Christopher Nolan, Aaron Sorkin, and Quentin Tarantino,
        you craft unique stories that captivate audiences worldwide.

        Your specialty is turning locations into living, breathing characters that drive the narrative.\
    """),
    instructions=dedent("""\
        When crafting movie concepts, follow these principles:

        1. Settings should be characters:
           - Make locations come alive with sensory details
           - Include atmospheric elements that affect the story
           - Consider the time period's impact on the narrative

        2. Character Development:
           - Give each character a unique voice and clear motivation
           - Create compelling relationships and conflicts
           - Ensure diverse representation and authentic backgrounds

        3. Story Structure:
           - Begin with a hook that grabs attention
           - Build tension through escalating conflicts
           - Deliver surprising yet inevitable endings

        4. Genre Mastery:
           - Embrace genre conventions while adding fresh twists
           - Mix genres thoughtfully for unique combinations
           - Maintain consistent tone throughout

        Transform every location into an unforgettable cinematic experience!\
    """),
    response_model=MovieScript,
)

# ä½¿ç”¨ç»“æ„åŒ–è¾“å‡ºçš„æ™ºèƒ½ä½“
structured_output_agent = Agent(
    model=OpenAIChat(id="gpt-4o"),
    description=dedent("""\
        You are an acclaimed Hollywood screenwriter known for creating unforgettable blockbusters! ğŸ¬
        With the combined storytelling prowess of Christopher Nolan, Aaron Sorkin, and Quentin Tarantino,
        you craft unique stories that captivate audiences worldwide.

        Your specialty is turning locations into living, breathing characters that drive the narrative.\
    """),
    instructions=dedent("""\
        When crafting movie concepts, follow these principles:

        1. Settings should be characters:
           - Make locations come alive with sensory details
           - Include atmospheric elements that affect the story
           - Consider the time period's impact on the narrative

        2. Character Development:
           - Give each character a unique voice and clear motivation
           - Create compelling relationships and conflicts
           - Ensure diverse representation and authentic backgrounds

        3. Story Structure:
           - Begin with a hook that grabs attention
           - Build tension through escalating conflicts
           - Deliver surprising yet inevitable endings

        4. Genre Mastery:
           - Embrace genre conventions while adding fresh twists
           - Mix genres thoughtfully for unique combinations
           - Maintain consistent tone throughout

        Transform every location into an unforgettable cinematic experience!\
    """),
    response_model=MovieScript,
)

# ä¸åŒä½ç½®çš„ä½¿ç”¨ç¤ºä¾‹
json_mode_agent.print_response("Tokyo", stream=True)
structured_output_agent.print_response("Ancient Rome", stream=True)

# æ›´å¤šç¤ºä¾‹å°è¯•ï¼š
"""
Creative location prompts to explore:
1. "Underwater Research Station" - For a claustrophobic sci-fi thriller
2. "Victorian London" - For a gothic mystery
3. "Dubai 2050" - For a futuristic heist movie
4. "Antarctic Research Base" - For a survival horror story
5. "Caribbean Island" - For a tropical adventure romance
"""

# è¦å°†å“åº”å­˜å…¥å˜é‡ï¼š
# from rich.pretty import pprint

# json_mode_response: RunResponse = json_mode_agent.run("çº½çº¦")
# pprint(json_mode_response.content)
# ç»“æ„åŒ–è¾“å‡ºå“åº”ï¼šRunResponse = ç»“æ„åŒ–è¾“å‡ºæ™ºèƒ½ä½“.run("çº½çº¦")
# pprint(ç»“æ„åŒ–è¾“å‡ºå“åº”.content)
```

## ä½¿ç”¨è¯´æ˜

<Steps>
  <Snippet file="create-venv-step.mdx" />

  <Step title="å®‰è£…åº“">
    ```bash
    pip install openai agno
    ```
  </Step>

  <Step title="è¿è¡Œæ™ºèƒ½ä½“">
    ```bash
    python structured_output.py
    ```
  </Step>

</Steps>