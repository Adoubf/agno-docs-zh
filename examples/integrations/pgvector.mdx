---
title: PgVector
---

The PgVector Assistant uses PgVector as Knowledge Base and Storage for the Assistant.

```python
from phi.assistant import Assistant
from phi.storage.assistant.postgres import PgAssistantStorage
from phi.knowledge.pdf import PDFUrlKnowledgeBase
from phi.vectordb.pgvector import PgVector2

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge_base = PDFUrlKnowledgeBase(
    urls=["https://phi-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"],
    vector_db=PgVector2(collection="recipes", db_url=db_url),
)
# Comment out after first run
knowledge_base.load(recreate=False)

storage = PgAssistantStorage(table_name="pdf_assistant", db_url=db_url)


assistant = Assistant(
    knowledge_base=knowledge_base,
    storage=storage,
    # tool_calls=True adds functions to
    # search the knowledge base and chat history
    use_tools=True,
    show_tool_calls=True,
    # Uncomment the following line to use traditional RAG
    # add_references_to_prompt=True,
)

assistant.cli_app()
```

## Usage

<Steps>

  <Step title="Install libraries">

    ```bash
    pip install -U pgvector pypdf "psycopg[binary]" sqlalchemy
    ```

  </Step>
  
  <Step title="Run PgVector">

    ```bash
    docker run -d \
    -e POSTGRES_DB=ai \
    -e POSTGRES_USER=ai \
    -e POSTGRES_PASSWORD=ai \
    -e PGDATA=/var/lib/postgresql/data/pgdata \
    -v pgvolume:/var/lib/postgresql/data \
    -p 5532:5432 \
    --name pgvector \
    phidata/pgvector:16
    ```

  </Step>

  <Step title="Run PgVector Assistant">

    <CodeGroup>

    ```bash Mac
    python cookbook/integrations/pgvector.py
    ```

    ```bash Windows
    python cookbook/integrations/pgvector.py
    ```

    </CodeGroup>

  </Step>

  </Steps>

## Information

- View on [Github](https://github.com/phidatahq/phidata/tree/main/cookbook/integrations/pgvector.py)
